<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>{% block title %}LNbitsBox Setup{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ln-pink':       'rgb(var(--ln-pink) / <alpha-value>)',
                        'ln-pink-dim':   'rgb(var(--ln-pink-dim) / <alpha-value>)',
                        'ln-surface':    'rgb(var(--ln-surface) / <alpha-value>)',
                        'ln-card':       'rgb(var(--ln-card) / <alpha-value>)',
                        'ln-card-hover': 'rgb(var(--ln-card-hover) / <alpha-value>)',
                        'ln-border':     'rgb(var(--ln-border) / <alpha-value>)',
                        'ln-text':       'rgb(var(--ln-text) / <alpha-value>)',
                        'ln-muted':      'rgb(var(--ln-muted) / <alpha-value>)',
                    },
                    fontFamily: {
                        mono: ['JetBrains Mono', 'monospace'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    animation: {
                        'glow-pulse': 'glow-pulse 3s ease-in-out infinite',
                        'slide-up': 'slide-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'fade-in': 'fade-in 0.6s ease forwards',
                        'scan-line': 'scan-line 4s linear infinite',
                    },
                    keyframes: {
                        'glow-pulse': {
                            '0%, 100%': { opacity: '0.4' },
                            '50%': { opacity: '0.8' },
                        },
                        'slide-up': {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        'fade-in': {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        'scan-line': {
                            '0%': { transform: 'translateY(-100%)' },
                            '100%': { transform: 'translateY(100vh)' },
                        },
                    },
                },
            },
        }
    </script>
    <style>
        :root {
            --ln-pink:       255 30 230;
            --ln-pink-dim:   204 24 184;
            --ln-surface:    248 248 252;
            --ln-card:       255 255 255;
            --ln-card-hover: 240 240 246;
            --ln-border:     216 216 228;
            --ln-text:       26 26 46;
            --ln-muted:      106 106 128;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --ln-surface:    15 15 20;
                --ln-card:       22 22 30;
                --ln-card-hover: 28 28 38;
                --ln-border:     42 42 58;
                --ln-text:       228 228 239;
                --ln-muted:      122 122 142;
            }
        }
        body { font-family: 'Space Grotesk', sans-serif; }
        .noise-bg::before {
            content: '';
            position: fixed;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 0;
        }
        .glow-pink {
            box-shadow: 0 0 30px rgba(255, 30, 230, 0.15), 0 0 60px rgba(255, 30, 230, 0.05);
        }
        .glow-pink-strong {
            box-shadow: 0 0 20px rgba(255, 30, 230, 0.3), 0 0 50px rgba(255, 30, 230, 0.1);
        }
        .step-active {
            box-shadow: 0 0 12px rgba(255, 30, 230, 0.5);
        }
        input:focus, textarea:focus {
            box-shadow: 0 0 0 1px rgb(var(--ln-pink)), 0 0 20px rgba(255, 30, 230, 0.15);
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgb(var(--ln-surface)); }
        ::-webkit-scrollbar-thumb { background: rgb(var(--ln-border)); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgb(var(--ln-pink)); }
        .grid-bg {
            background-image:
                linear-gradient(rgb(var(--ln-border) / 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgb(var(--ln-border) / 0.15) 1px, transparent 1px);
            background-size: 40px 40px;
        }
        input[type="checkbox"] {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid rgb(var(--ln-border));
            border-radius: 4px;
            background: rgb(var(--ln-card));
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
        }
        input[type="checkbox"]:checked {
            background: rgb(var(--ln-pink));
            border-color: rgb(var(--ln-pink));
        }
        input[type="checkbox"]:checked::after {
            content: '\2713';
            position: absolute;
            color: white;
            font-size: 14px;
            font-weight: 700;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body class="bg-ln-surface text-ln-text min-h-screen noise-bg grid-bg flex items-center justify-center p-4 sm:p-6">

    <div class="relative z-10 w-full max-w-lg">

        {# ── Header / Logo ── #}
        <div class="flex items-center justify-center gap-3 mb-8 animate-fade-in">
            <svg class="h-8 opacity-90" viewBox="0 0 496 148" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>Group 6</title>
                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="Desktop-HD" transform="translate(-68.000000, -665.000000)" fill-rule="nonzero">
                        <g id="Group-9" transform="translate(25.405063, 654.000000)">
                            <g id="Group-6" transform="translate(43.000000, 11.000000)">
                                <path d="M168.594937,119 L168.594937,99.05 L117.294937,99.05 L117.294937,15.95 L95.2449367,15.95 L95.2449367,119 L168.594937,119 Z M200.094937,119 L200.094937,52.4 L249.894937,119 L271.944937,119 L271.944937,15.95 L249.894937,15.95 L249.894937,82.55 L200.094937,15.95 L178.044937,15.95 L178.044937,119 L200.094937,119 Z M321.494937,120.8 C328.194937,120.8 334.269937,119.075 339.719937,115.625 C345.169937,112.175 349.444937,107.35 352.544937,101.15 C355.644937,94.95 357.194937,87.95 357.194937,80.15 C357.194937,72.35 355.644937,65.375 352.544937,59.225 C349.444937,53.075 345.169937,48.275 339.719937,44.825 C334.269937,41.375 328.194937,39.65 321.494937,39.65 C315.394937,39.65 309.919937,41.075 305.069937,43.925 C300.219937,46.775 296.294937,50.8 293.294937,56 L293.294937,56 L293.294937,14.15 L282.044937,14.15 L282.044937,119 L293.294937,119 L293.294937,104.45 C296.294937,109.65 300.219937,113.675 305.069937,116.525 C309.919937,119.375 315.394937,120.8 321.494937,120.8 Z M319.394937,110.75 C314.394937,110.75 309.894937,109.45 305.894937,106.85 C301.894937,104.25 298.794937,100.625 296.594937,95.975 C294.394937,91.325 293.294937,86.05 293.294937,80.15 C293.294937,74.25 294.394937,69 296.594937,64.4 C298.794937,59.8 301.894937,56.2 305.894937,53.6 C309.894937,51 314.394937,49.7 319.394937,49.7 C324.394937,49.7 328.869937,51 332.819937,53.6 C336.769937,56.2 339.844937,59.8 342.044937,64.4 C344.244937,69 345.344937,74.25 345.344937,80.15 C345.344937,86.05 344.244937,91.325 342.044937,95.975 C339.844937,100.625 336.769937,104.25 332.819937,106.85 C328.869937,109.45 324.394937,110.75 319.394937,110.75 Z M368.844937,27.35 C370.844937,27.35 372.569937,26.6 374.019937,25.1 C375.469937,23.6 376.194937,21.85 376.194937,19.85 C376.194937,17.85 375.469937,16.125 374.019937,14.675 C372.569937,13.225 370.844937,12.5 368.844937,12.5 C366.744937,12.5 364.969937,13.225 363.519937,14.675 C362.069937,16.125 361.344937,17.85 361.344937,19.85 C361.344937,21.85 362.069937,23.6 363.519937,25.1 C364.969937,26.6 366.744937,27.35 368.844937,27.35 Z M374.394937,119 L374.394937,41.45 L363.144937,41.45 L363.144937,119 L374.394937,119 Z M415.494937,120.8 C420.894937,120.8 425.694937,119.15 429.894937,115.85 L429.894937,115.85 L424.344937,107.6 C423.444937,108.5 422.294937,109.25 420.894937,109.85 C419.494937,110.45 417.944937,110.75 416.244937,110.75 C413.944937,110.75 411.969937,109.825 410.319937,107.975 C408.669937,106.125 407.844937,103.8 407.844937,101 L407.844937,101 L407.844937,51.5 L426.894937,51.5 L426.894937,41.45 L407.844937,41.45 L407.844937,20.15 L396.594937,20.15 L396.594937,41.45 L384.444937,41.45 L384.444937,51.5 L396.594937,51.5 L396.594937,101 C396.594937,106.8 398.369937,111.55 401.919937,115.25 C405.469937,118.95 409.994937,120.8 415.494937,120.8 Z M466.694937,120.8 C474.894937,120.8 481.669937,118.65 487.019937,114.35 C492.369937,110.05 495.044937,104.4 495.044937,97.4 C495.044937,92.8 493.894937,89.075 491.594937,86.225 C489.294937,83.375 486.444937,81.15 483.044937,79.55 C479.644937,77.95 475.194937,76.3 469.694937,74.6 C464.094937,72.8 459.994937,71.35 457.394937,70.25 C454.794937,69.15 452.844937,67.9 451.544937,66.5 C450.244937,65.1 449.594937,63.3 449.594937,61.1 C449.594937,57.5 451.094937,54.7 454.094937,52.7 C457.094937,50.7 460.894937,49.7 465.494937,49.7 C472.694937,49.7 480.144937,52.15 487.844937,57.05 L487.844937,57.05 L493.244937,48.35 C489.044937,45.65 484.544937,43.525 479.744937,41.975 C474.944937,40.425 470.194937,39.65 465.494937,39.65 C457.594937,39.65 451.094937,41.725 445.994937,45.875 C440.894937,50.025 438.344937,55.55 438.344937,62.45 C438.344937,67.95 440.294937,72.325 444.194937,75.575 C448.094937,78.825 454.794937,81.8 464.294937,84.5 C468.794937,85.8 472.319937,86.95 474.869937,87.95 C477.419937,88.95 479.544937,90.325 481.244937,92.075 C482.944937,93.825 483.794937,96 483.794937,98.6 C483.794937,102.3 482.219937,105.25 479.069937,107.45 C475.919937,109.65 471.794937,110.75 466.694937,110.75 C458.094937,110.75 449.344937,107.5 440.444937,101 L440.444937,101 L434.594937,109.25 C439.194937,112.95 444.319937,115.8 449.969937,117.8 C455.619937,119.8 461.194937,120.8 466.694937,120.8 Z" id="LNbits" fill="currentColor"></path>
                                <polygon id="Path" fill="#FF1EE6" points="31.7629055 0 7.10760662 78.8585043 26.9789129 78.8585043 2.69673524e-13 148 74.8401889 57.3517272 43.9349963 57.3517272 84.3037975 8.34401992e-14"></polygon>
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
        </div>

        {# ── Flash Messages ── #}
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mb-4 space-y-2 animate-slide-up">
                {% for category, message in messages %}
                    {% if category == 'error' %}
                    <div class="bg-red-500/10 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg font-mono text-sm">
                        {{ message }}
                    </div>
                    {% elif category == 'success' %}
                    <div class="bg-emerald-500/10 border border-emerald-500/30 text-emerald-300 px-4 py-3 rounded-lg font-mono text-sm">
                        {{ message }}
                    </div>
                    {% else %}
                    <div class="bg-amber-500/10 border border-amber-500/30 text-amber-300 px-4 py-3 rounded-lg font-mono text-sm">
                        {{ message }}
                    </div>
                    {% endif %}
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {# ── Main Card ── #}
        <div class="bg-ln-card border border-ln-border rounded-2xl overflow-hidden glow-pink animate-slide-up" style="animation-delay: 0.1s; opacity: 0;">

            {# ── Step Indicator (shown on wizard pages) ── #}
            {% block step_indicator %}{% endblock %}

            {# ── Content ── #}
            <div class="p-6 sm:p-8">
                {% block content %}{% endblock %}
            </div>
        </div>

        {# ── Footer ── #}
        <div class="mt-6 text-center animate-fade-in" style="animation-delay: 0.3s; opacity: 0;">
            <p class="text-ln-muted text-xs font-mono tracking-wider uppercase">
                LNbitsBox &middot; Powered by LNbits
            </p>
        </div>
    </div>

</body>
</html>
